<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nopa — Smart. Simple. Secure.</title>

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        margin: 0;
        font-family: "Inter", sans-serif;
        background-color: #f8f9fb;
        color: #333;
        text-align: center;
      }

      /* === SLIDER CONTAINER === */
      .slider {
        max-height: 75vh;
        position: relative;
        width: 100%;
        height: 100vh;
        overflow: hidden;
      }

      .slide {
        position: absolute;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 0.8s ease;
      }

      .slide.active {
        opacity: 1;
        z-index: 1;
      }


      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 2rem;
        background: white;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      header img {
        height: 40px;
      }


            /* === HERO SLIDE === */
      .hero {
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        color: white;
        background-image: url("https://saynopa.com/cdn/shop/files/Frame_132_4d2dd98c-ccab-42e7-9ebb-ede5556a3780.jpg");
        background-size: cover;
        background-position: center;
      }
/* 
      .hero::before {
        content: "";
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.45);
      } */

            .hero > div {
        position: relative;
        z-index: 2;
        max-width: 600px;
        padding: 2rem;
      }
/* === MAP SLIDE === */
      .map iframe {
        width: 100%;
        height: 100%;
        border: none;
      }

      /* === NAVIGATION BUTTONS === */
      .slider-nav {
  position: relative;
  margin: 1.5rem auto;
  display: flex;
  justify-content: center;
  gap: 12px;
  z-index: 10;
}
      /* .slider-nav {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 12px;
        z-index: 10;
      } */

      .nav-dot {
        width: 14px;
        height: 14px;
        border-radius: 50%;
        background: gray;
        /* background: rgba(255, 255, 255, 0.5); */
        cursor: pointer;
        transition: background 0.3s;
      }

      .nav-dot.active {
        background: orange;
        /* background: white; */
      }

.hero-content {
  position: relative;
  z-index: 1;
  max-width: 600px;
  padding: 2rem;
  backdrop-filter: blur(2px);
}

.login-buttons {
  margin-top: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.login-buttons button {
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
  background-color: rgba(255, 255, 255, 0.9);
  color: #333;
  transition: background 0.3s;
}

.login-buttons button:hover {
  background-color: #fff;
}
      .hero h1 {
        font-size: 2.2rem;
        margin-bottom: 0.5rem;
      }

      .hero p {
        font-size: 1.1rem;
        color: white;
        max-width: 600px;
        margin-bottom: 2rem;
      }

      .hero img {
        width: 280px;
        border-radius: 12px;
        margin-bottom: 2rem;
      }

      .login-buttons {
        display: flex;
        flex-direction: column;
        gap: 12px;
        width: 260px;
        margin: 0 auto;
        color: white;
      }

      button {
        padding: 0.75rem;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
        color: white;
      }

      #google-login {
        color: white;
        background-color: orange;
      }

      #apple-login {
        color: white;
        background-color: #000000;
      }

      #facebook-login {
        color: white;
        background-color: #1877f2;
      }

      #logout {
        background-color: orange;
      }

      iframe {
        width: 100%;
        height: 300px;
        border: none;
      }

      footer {
        padding: 1rem;
        font-size: 0.9rem;
        color: #777;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }

      .social-icons {
        display: flex;
        gap: 16px;
      }

      .social-icons a {
        color: #555;
        text-decoration: none;
        transition: color 0.2s;
      }

      .social-icons a:hover {
        color: #000;
      }

      .social-icons svg {
        width: 22px;
        height: 22px;
      }

      @media (min-width: 768px) {
        .hero {
          flex-direction: row;
          justify-content: center;
          padding-top: 2rem;
          padding-bottom: 2rem;
          gap: 3rem;
          min-height: 80vh; /* show footer */
        }

        .hero img {
          width: 350px;
        }

        .login-buttons {
          width: 300px;
        }
      }
    </style>
  </head>

  <body>
    <header>
      <img
        src="https://saynopa.com/cdn/shop/files/NOPAMOVE_logo.png"
        alt="Company Logo"
      />
      <p id="status">Loading...</p>
      <button id="logout" style="display: none">Sign Out</button>
    </header>


    <!-- Merchant Section -->
  <div class="merchant" style="display: none;">
    <h2>Welcome, Merchant</h2>
    <p>This section is only for merchants.</p>
  </div>

  <!-- User Section -->
  <div class="user" style="display: none;">
    <h2>Welcome, User</h2>
    <p>This section is only for normal users.</p>
  </div>

      <div class="slider">
      <!-- Slide 1 -->
      <section class="slide hero active">
        <div>
          <h1>Tái định nghĩa bền vững, từng một ngụm nhỏ</h1>
          <!-- <p>
           Nopa Move, sản phẩm đầu tiên của chúng mình, được thiết kế dành riêng cho văn hóa và thói quen của Đông Nam Á. Không chỉ là một chiếc bình, Nopa Move còn là chìa khóa mở ra đa dạng phần thưởng, để bạn thoải mái thưởng thức những đồ uống yêu thích của mình và đồng hành cùng cộng đồng hướng đến những thay đổi tích cực.
          </p> -->

          <div class="login-buttons">
            <button id="google-login">Đăng nhập với Google</button>
            <button id="apple-login">Đăng nhập với Apple</button>
            <button id="facebook-login">Đăng nhập với Facebook</button>
            <!-- <button id="logout" style="display: none">Sign Out</button> -->
          </div>
        </div>
      </section>

      <!-- Slide 2 -->
      <section class="slide map">
        <iframe
          src="https://www.google.com/maps/d/embed?mid=1nt8NnPvjOCIr4fE3KCSzawvggkY5vWU&ehbc=2E312F"
          allowfullscreen=""
          loading="lazy"
        ></iframe>
      </section>
    </div>
          <div class="slider-nav">
        <div class="nav-dot active" data-slide="0"></div>
        <div class="nav-dot" data-slide="1"></div>
      </div>

    <script>
      const slides = document.querySelectorAll(".slide");
      const dots = document.querySelectorAll(".nav-dot");
      let currentSlide = 0;

      function showSlide(index) {
        slides.forEach((slide, i) => {
          slide.classList.toggle("active", i === index);
          dots[i].classList.toggle("active", i === index);
        });
        currentSlide = index;
      }

      // Dot click navigation
      dots.forEach((dot, i) =>
        dot.addEventListener("click", () => showSlide(i))
      );
    </script>

    <footer>
      <div class="social-icons">
<a href="https://saynopa.com" target="_blank" aria-label="Website">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="currentColor"
    viewBox="0 0 24 24"
  >
    <path
      d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10
         10-4.48 10-10S17.52 2 12 2Zm0 1.5
         c4.69 0 8.5 3.81 8.5 8.5
         s-3.81 8.5-8.5 8.5
         S3.5 16.69 3.5 12
         7.31 3.5 12 3.5Zm-1.25 2
         c-.35 0-.75.4-.75.75v2.75l-1.5 1.5
         v1.5l2.25 1.5V16l-1.5 1.5v1
         c0 .35.4.75.75.75h3
         c.35 0 .75-.4.75-.75v-1.5
         l2.25-1.5v-2.25l-2.25-1.5V9
         l1.5-1.5V6.25c0-.35-.4-.75-.75-.75h-3Z"
    />
  </svg>
</a>
        <a href="https://www.instagram.com/nopa.design/" target="_blank" aria-label="Instagram">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2Zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5ZM12 7a5 5 0 1 1 0 10a5 5 0 0 1 0-10Zm0 1.5a3.5 3.5 0 1 0 0 7a3.5 3.5 0 0 0 0-7ZM17.5 6a1 1 0 1 1 0 2a1 1 0 0 1 0-2Z"
            />
          </svg>
        </a>
        <a href="https://www.facebook.com/NopaProductDesign" target="_blank" aria-label="Facebook">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M22 12a10 10 0 1 0-11.5 9.9v-7H8v-3h2.5V9.5a3.5 3.5 0 0 1 3.8-3.9c1.1 0 2.2.2 2.2.2v2.5H15a1.5 1.5 0 0 0-1.7 1.6V12H17l-.5 3h-2.2v7A10 10 0 0 0 22 12Z"
            />
          </svg>
        </a>
        <a href="https://www.linkedin.com/company/nopa-pdx/" target="_blank" aria-label="LinkedIn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M4.98 3.5A2.5 2.5 0 1 1 2.5 6a2.5 2.5 0 0 1 2.48-2.5ZM3 8h4v13H3V8Zm7 0h3.6v1.8h.1a3.95 3.95 0 0 1 3.6-2c3.8 0 4.5 2.5 4.5 5.7V21h-4v-6.2c0-1.5 0-3.3-2-3.3c-2 0-2.3 1.6-2.3 3.2V21h-4V8Z"
            />
          </svg>
        </a>
      </div>
      <p>© 2025 Nopa Inc. All rights reserved.</p>
    </footer>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-analytics.js";
      import {
        getAuth,
        signInWithPopup,
        GoogleAuthProvider,
        FacebookAuthProvider,
        OAuthProvider,
        signOut,
        onAuthStateChanged
      } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyD2akq6BzDJrK5FgwjKsxIawvH6rhQupFo",
        authDomain: "nopa-d644b.firebaseapp.com",
        projectId: "nopa-d644b",
        storageBucket: "nopa-d644b.firebasestorage.app",
        messagingSenderId: "490802969481",
        appId: "1:490802969481:web:5830b955bfcf0d08a63f58",
        measurementId: "G-J2LGKVYTWT"
      };

      const app = initializeApp(firebaseConfig);
      getAnalytics(app);

      const auth = getAuth(app);
      const googleProvider = new GoogleAuthProvider();
      const facebookProvider = new FacebookAuthProvider();
      const appleProvider = new OAuthProvider("apple.com");

      const googleBtn = document.getElementById("google-login");
      const appleBtn = document.getElementById("apple-login");
      const fbBtn = document.getElementById("facebook-login");
      const logoutBtn = document.getElementById("logout");
      const status = document.getElementById("status");

      googleBtn.onclick = () => signInWithPopup(auth, googleProvider);
      appleBtn.onclick = () => signInWithPopup(auth, appleProvider);
      fbBtn.onclick = () => signInWithPopup(auth, facebookProvider);
      logoutBtn.onclick = () => signOut(auth);

      onAuthStateChanged(auth, async (user) => {
      const slider = document.querySelector(".slider");
      const merchantDiv = document.querySelector(".merchant");
      const userDiv = document.querySelector(".user");
        if (user) {
          status.textContent = `👋 Chào, ${user.displayName || "User"}`;
          googleBtn.style.display =
            appleBtn.style.display =
            fbBtn.style.display =
              "none";
          logoutBtn.style.display = "block";
          // Hide slider once signed in
        slider.style.display = "none";

        // Fetch role from Firestore (assuming stored as users/{uid}.role)
        const userRef = doc(db, "users", user.uid);
        const userSnap = await getDoc(userRef);

        if (userSnap.exists()) {
          const role = userSnap.data().role;

          if (role === "merchant") {
            merchantDiv.style.display = "block";
          } else {
            userDiv.style.display = "block";
          }
        } else {
          console.warn("User document not found");
          userDiv.style.display = "block"; // fallback
        }
        } else {
          status.textContent = "Chưa đăng nhập";
          googleBtn.style.display =
            appleBtn.style.display =
            fbBtn.style.display =
              "block";
          logoutBtn.style.display = "none";
                  // Not signed in: show slider, hide others
        slider.style.display = "block";
        merchantDiv.style.display = "none";
        userDiv.style.display = "none";
        }
      });
    </script>
  </body>
</html>